<!DOCTYPE HTML>

<html>
  <head>
    <title>DoC Lab Machine/Server Tutorial</title>
  </head>
  <body>

    <H2>Department of Computing Lab Machine/Server Tutorial</h2>

    <h3>Hint: Workstation Name:</h3>
    <p><a href="https://www.imperial.ac.uk/computing/csg/facilities/lab/workstations/">[Workstations]</a> </p>

    <h3>Share Storage</h3>

    <pre>
      PATH: /vol/bitbucket/${USER}
    </pre>

    <h3>Connect to a DoC server/machine</h3>
    <p><b>Method 1</b></p>
    <p>First, use ssh to connect to shell[1-5].doc.ic.ac.uk</p>
    <pre>
      eg: ssh USERNAME@shell1.doc.ac.ic.uk
    </pre>
    <p>Then, connect to a DoC server/machine</p>
    <pre>
      eg: ssh USERNAME@ray06.doc.ic.ac.uk
    </pre>

    <p><b>Method 2</b></p>
    <pre>
      ssh -t [USERNAME@]shell3.doc.ic.ac.uk /vol/linux/bin/sshtolab
    </pre>

    <h3>Python environment</h3>
    <p>Create python environment</p>
    <pre>
      python3 -m virtualenv $PATH
      or python3 -m venv $PATH
    </pre>

    <p>Delete python environment</p>
    <pre>
      rm -rf $PATH
      eg: rm -rf py310
    </pre>

    <p>Activate python environment</p>
    <pre>
      source $PATH/bin/activate
    </pre>

    <p>Deactivate python environment</p>
    <pre>
      deactivate
    </pre>

    <h4>Shortcut</h4>
    <p>Create Shortcut</p>
    <p>
      Create a symbolic link (i.e. shortcut) from your home directory 
      to point to the activate script. The following creates a symbolic link 
      named ml venv in your home directory. You only need to do this once.
    </p>
    <pre>
      eg: ln -s /vol/lab/intro2ml/venv/bin/activate ~/ml_venv
    </pre>

    <p>
      You can then activate this virtual environment using your shortcut any time you need it.
    </p>
    <pre>
      eg: source ~/ml_venv
    </pre>

    <p>Remove Shortcut</p>
      <pre>
      eg: rm -i ml_venv
    </pre>


    <h3>Jupyter Notenook</h3>

    Connect the Jupyter Notenook with the virtual environment on DoC server

    <pre>
    ssh -t -L PORT:localhost:PORT USERNAME@shell[1-5].doc.ic.ac.uk "$LabMachine PATH -g -w ~/ -p PORT -e /vol/bitbucket/username/venv"
    </pre>
    <pre>
    PORT: Pick a random number between 10000 and 20000
    $LabMachine PATH: eg /vol/linux/bin/sshtolab
    </pre>

<h3>Useful links:</h3>
  
    <b>Introduction to Machine Learning course Python virtual environment:</b>
    <pre>
    PATH: /vol/lab/intro2ml/venv/
    Shortcut of the environment: ml_venv
    Activate the environment: source ml_venv
    </pre>

    <b>Python 3.10.12 virtual environment:</b>
    <pre>
    PATH: /vol/bitbucket/mr423/py_env/py310/
    Shortcut of the environment: py310
    </pre>



  </body>


<p>
  Reference: Introduction to Machine Learning course material
</p>

</html>
